#!/usr/bin/env sh
. "$(dirname "$0")/_/husky.sh"

printf "\nğŸ” Running pre-commit quality gate...\n\n"

# Run full repository checks and fail on first error/warning
pnpm precommit:all
status=$?

if [ $status -ne 0 ]; then
  echo "\nâŒ Pre-commit checks failed. Please review the errors and warnings above."
  echo "   Quick fix: run 'pnpm fix' to auto-apply Prettier + ESLint fixes where possible."
  echo "   Then re-run: 'pnpm precommit:all' to verify all checks pass."
  exit $status
fi

echo "\nâœ… All pre-commit checks passed."
